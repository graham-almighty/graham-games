<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GRAHAM GAMES</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='6' fill='%230a0a0f'/><text x='16' y='22' text-anchor='middle' font-family='serif' font-weight='bold' font-size='16' fill='%23c9a84c'>GG</text></svg>">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700;900&family=Cinzel:wght@700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #0a0a0f;
    color: #ddd;
    font-family: 'Cinzel', serif;
    height: 100vh;
    overflow: hidden;
    user-select: none;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Subtle dark texture */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse at 30% 20%, #1a0f2a22 0%, transparent 50%),
      radial-gradient(ellipse at 70% 80%, #0f1a1a22 0%, transparent 50%),
      repeating-conic-gradient(#ffffff02 0deg, transparent 1deg, transparent 3deg);
    pointer-events: none;
  }

  /* Vignette */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 40%, #000000aa 100%);
    pointer-events: none;
  }

  .launcher {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    padding: 10px 0;
    overflow: hidden;
  }

  /* ═══ SERPENT LOGO ═══ */
  .logo {
    width: 300px;
    height: 260px;
    margin-bottom: 20px;
    filter: drop-shadow(0 0 30px #2a8a4a44) drop-shadow(0 0 60px #2a8a4a22);
  }

  /* Serpent scales shimmer */
  @keyframes scaleShimmer {
    0% { filter: drop-shadow(0 0 20px #2a8a4a44) drop-shadow(0 0 50px #2a8a4a22); }
    50% { filter: drop-shadow(0 0 35px #3aaa6a66) drop-shadow(0 0 70px #2a8a4a33); }
    100% { filter: drop-shadow(0 0 20px #2a8a4a44) drop-shadow(0 0 50px #2a8a4a22); }
  }
  .logo { animation: scaleShimmer 3s ease-in-out infinite; }

  /* ═══ TITLE ═══ */
  .title {
    font-family: 'Cinzel Decorative', serif;
    font-size: 3.2rem;
    font-weight: 900;
    color: #c9a84c;
    text-shadow:
      0 0 20px #c9a84c44,
      0 0 40px #c9a84c22,
      2px 2px 0 #1a1200;
    letter-spacing: 0.12em;
    margin-bottom: 0.1em;
    text-align: center;
  }

  .divider {
    width: 300px;
    height: 2px;
    background: linear-gradient(90deg, transparent, #c9a84c66, #c9a84c, #c9a84c66, transparent);
    margin: 10px 0 30px;
  }

  .subtitle {
    font-size: 0.95rem;
    color: #888;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    margin-bottom: 15px;
  }

  /* ═══ G BUX BAR ═══ */
  .gbux-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    background: #00000088;
    padding: 6px 18px;
    border-radius: 20px;
    border: 1px solid #c9a84c44;
    backdrop-filter: blur(4px);
    margin-bottom: 8px;
  }
  .gbux-icon { font-size: 1.2rem; }
  .gbux-amount {
    font-family: 'Cinzel Decorative', serif;
    font-size: 1.3rem;
    color: #c9a84c;
    font-weight: 700;
  }
  .gbux-label {
    font-size: 0.65rem;
    color: #888;
    letter-spacing: 0.1em;
  }

  /* ═══ NAV BUTTONS ═══ */
  .launcher-nav {
    display: flex;
    gap: 12px;
    margin-bottom: 25px;
  }
  .nav-btn {
    font-family: 'Cinzel', serif;
    font-size: 0.7rem;
    background: transparent;
    color: #c9a84c;
    border: 1px solid #c9a84c44;
    padding: 7px 16px;
    cursor: pointer;
    letter-spacing: 0.08em;
    transition: all 0.2s;
  }
  .nav-btn:hover {
    background: #c9a84c15;
    border-color: #c9a84c;
    box-shadow: 0 0 20px #c9a84c22;
  }

  /* ═══ OVERLAYS ═══ */
  .gg-overlay {
    position: fixed;
    inset: 0;
    background: #000000dd;
    z-index: 50;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
    backdrop-filter: blur(6px);
  }
  .gg-overlay.visible { opacity: 1; pointer-events: all; }
  .gg-panel {
    background: linear-gradient(135deg, #141418, #1a1a22);
    border: 1px solid #c9a84c44;
    border-radius: 12px;
    padding: 28px;
    max-width: 520px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 0 60px #c9a84c15;
  }
  .gg-panel::-webkit-scrollbar { width: 6px; }
  .gg-panel::-webkit-scrollbar-thumb { background: #c9a84c44; border-radius: 3px; }
  .gg-panel h2 {
    font-family: 'Cinzel Decorative', serif;
    color: #c9a84c;
    font-size: 1.3rem;
    margin-bottom: 4px;
    text-shadow: 0 0 20px #c9a84c33;
  }
  .gg-panel-sub { color: #888; font-size: 0.75rem; margin-bottom: 18px; letter-spacing: 0.08em; }
  .gg-close {
    font-family: 'Cinzel', serif;
    display: block;
    margin: 18px auto 0;
    padding: 7px 28px;
    background: transparent;
    border: 1px solid #555;
    color: #888;
    cursor: pointer;
    font-size: 0.75rem;
    letter-spacing: 0.08em;
    transition: all 0.15s;
  }
  .gg-close:hover { color: #c9a84c; border-color: #c9a84c; }

  /* Achievement items */
  .ach-group { font-family: 'Cinzel', serif; color: #eee; font-size: 0.85rem; margin: 14px 0 6px; border-bottom: 1px solid #333; padding-bottom: 3px; }
  .ach-item {
    display: flex; align-items: center; gap: 10px;
    padding: 8px 10px; border-radius: 5px; margin-bottom: 3px;
  }
  .ach-item.locked { opacity: 0.35; }
  .ach-item.earned { background: #c9a84c08; }
  .ach-icon {
    width: 32px; height: 32px; border-radius: 50%;
    border: 2px solid #444; display: flex; align-items: center;
    justify-content: center; font-size: 1rem; flex-shrink: 0;
  }
  .ach-item.earned .ach-icon { border-color: #c9a84c; background: #c9a84c22; }
  .ach-info { flex: 1; }
  .ach-name { font-family: 'Cinzel', serif; font-size: 0.8rem; color: #ddd; }
  .ach-desc { font-size: 0.65rem; color: #777; }
  .ach-reward { font-family: 'Cinzel', serif; font-size: 0.75rem; color: #c9a84c; white-space: nowrap; }

  /* Shop items */
  .shop-bal { color: #c9a84c; font-size: 0.85rem; margin-bottom: 14px; }
  .shop-item {
    display: flex; align-items: center; gap: 12px;
    padding: 12px; border-radius: 7px; border: 1px solid #333;
    margin-bottom: 6px; transition: border-color 0.15s;
  }
  .shop-item:hover { border-color: #c9a84c44; }
  .shop-item-icon { font-size: 1.8rem; width: 44px; text-align: center; }
  .shop-item-info { flex: 1; }
  .shop-item-name { font-family: 'Cinzel', serif; color: #eee; font-size: 0.85rem; }
  .shop-item-desc { font-size: 0.65rem; color: #777; margin-top: 1px; }
  .shop-item-game { font-size: 0.55rem; color: #555; text-transform: uppercase; letter-spacing: 0.08em; margin-top: 2px; }
  .shop-buy {
    font-family: 'Cinzel', serif; padding: 5px 14px;
    border: 1px solid #c9a84c; background: #c9a84c22;
    color: #c9a84c; cursor: pointer; font-size: 0.75rem;
    border-radius: 4px; transition: all 0.15s; white-space: nowrap;
  }
  .shop-buy:hover { background: #c9a84c33; box-shadow: 0 0 15px #c9a84c22; }
  .shop-buy.owned { border-color: #555; color: #555; background: transparent; cursor: default; }
  .shop-buy.locked { border-color: #444; color: #444; background: transparent; cursor: default; }

  /* ═══ GAME LIST ═══ */
  .game-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center;
    width: 100%;
    max-width: 500px;
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    padding-right: 8px;
    scroll-behavior: smooth;
    scrollbar-width: thin;
    scrollbar-color: #c9a84c66 #1a1a2e;
  }
  .game-list::-webkit-scrollbar { width: 6px; }
  .game-list::-webkit-scrollbar-track { background: #1a1a2e; border-radius: 3px; }
  .game-list::-webkit-scrollbar-thumb { background: #c9a84c66; border-radius: 3px; }
  .game-list::-webkit-scrollbar-thumb:hover { background: #c9a84c99; }

  .game-card {
    width: 100%;
    flex-shrink: 0;
    padding: 20px 30px;
    background: linear-gradient(135deg, #141418 0%, #1a1a22 50%, #141418 100%);
    border: 1px solid #333;
    border-left: 4px solid #c9a84c;
    display: flex;
    align-items: center;
    gap: 20px;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    color: inherit;
    position: relative;
    overflow: hidden;
  }
  .game-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, #c9a84c08 0%, transparent 50%);
    opacity: 0;
    transition: opacity 0.2s;
  }
  .game-card:hover {
    border-color: #c9a84c;
    transform: translateX(5px);
    box-shadow: 0 0 30px #c9a84c15, -5px 0 20px #c9a84c10;
  }
  .game-card:hover::before {
    opacity: 1;
  }
  .game-card:active {
    transform: translateX(2px) scale(0.99);
  }

  .game-icon {
    width: 60px;
    height: 60px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    font-size: 1.8rem;
    position: relative;
    z-index: 1;
  }

  .game-info {
    flex: 1;
    position: relative;
    z-index: 1;
  }
  .game-info .game-title {
    font-family: 'Cinzel Decorative', serif;
    font-size: 1.3rem;
    font-weight: 700;
    color: #eee;
    margin-bottom: 4px;
  }
  .game-info .game-desc {
    font-size: 0.8rem;
    color: #777;
    letter-spacing: 0.05em;
  }

  .game-arrow {
    font-size: 1.5rem;
    color: #555;
    transition: color 0.2s, transform 0.2s;
    position: relative;
    z-index: 1;
  }
  .game-card:hover .game-arrow {
    color: #c9a84c;
    transform: translateX(4px);
  }

  /* Hurgvibbit card special styling */
  .game-card.hurgvibbit {
    border-left-color: #ff1744;
  }
  .game-card.hurgvibbit:hover {
    border-color: #ff1744;
    box-shadow: 0 0 30px #ff174415, -5px 0 20px #ff174410;
  }
  .game-card.hurgvibbit::before {
    background: linear-gradient(90deg, #ff174408 0%, transparent 50%);
  }
  .game-card.hurgvibbit .game-icon {
    background: linear-gradient(135deg, #1a0808, #2a0a0a);
    border: 1px solid #ff174444;
  }

  /* Flying Ace card */
  .game-card.flying-ace {
    border-left-color: #4a9eff;
  }
  .game-card.flying-ace:hover {
    border-color: #4a9eff;
    box-shadow: 0 0 30px #4a9eff15, -5px 0 20px #4a9eff10;
  }
  .game-card.flying-ace::before {
    background: linear-gradient(90deg, #4a9eff08 0%, transparent 50%);
  }
  .game-card.flying-ace .game-icon {
    background: linear-gradient(135deg, #0a1020, #0a1830);
    border: 1px solid #4a9eff44;
    border-radius: 8px;
  }

  /* Combat card */
  .game-card.combat {
    border-left-color: #ff6d00;
  }
  .game-card.combat:hover {
    border-color: #ff6d00;
    box-shadow: 0 0 30px #ff6d0015, -5px 0 20px #ff6d0010;
  }
  .game-card.combat::before {
    background: linear-gradient(90deg, #ff6d0008 0%, transparent 50%);
  }
  .game-card.combat .game-icon {
    background: linear-gradient(135deg, #1a1008, #2a1808);
    border: 1px solid #ff6d0044;
    border-radius: 8px;
  }

  /* Mini Life card */
  .game-card.mini-life {
    border-left-color: #4caf50;
  }
  .game-card.mini-life:hover {
    border-color: #4caf50;
    box-shadow: 0 0 30px #4caf5015, -5px 0 20px #4caf5010;
  }
  .game-card.mini-life::before {
    background: linear-gradient(90deg, #4caf5008 0%, transparent 50%);
  }
  .game-card.mini-life .game-icon {
    background: linear-gradient(135deg, #081a08, #0a2a0a);
    border: 1px solid #4caf5044;
    border-radius: 8px;
  }

  /* Tower Defense card */
  .game-card.tower-defense {
    border-left-color: #9b59b6;
  }
  .game-card.tower-defense:hover {
    border-color: #9b59b6;
    box-shadow: 0 0 30px #9b59b615, -5px 0 20px #9b59b610;
  }
  .game-card.tower-defense::before {
    background: linear-gradient(90deg, #9b59b608 0%, transparent 50%);
  }
  .game-card.tower-defense .game-icon {
    background: linear-gradient(135deg, #14081a, #200a2a);
    border: 1px solid #9b59b644;
    border-radius: 8px;
  }

  /* Ancient Warfare card */
  .game-card.ancient-warfare {
    border-left-color: #cd7f32;
  }
  .game-card.ancient-warfare:hover {
    border-color: #cd7f32;
    box-shadow: 0 0 30px #cd7f3215, -5px 0 20px #cd7f3210;
  }
  .game-card.ancient-warfare::before {
    background: linear-gradient(90deg, #cd7f3208 0%, transparent 50%);
  }
  .game-card.ancient-warfare .game-icon {
    background: linear-gradient(135deg, #1a1008, #2a1a08);
    border: 1px solid #cd7f3244;
    border-radius: 8px;
  }

  /* Rogue Depths card */
  .game-card.rogue-depths {
    border-left-color: #8b5e3c;
  }
  .game-card.rogue-depths:hover {
    border-color: #8b5e3c;
    box-shadow: 0 0 30px #8b5e3c15, -5px 0 20px #8b5e3c10;
  }
  .game-card.rogue-depths::before {
    background: linear-gradient(90deg, #8b5e3c08 0%, transparent 50%);
  }
  .game-card.rogue-depths .game-icon {
    background: linear-gradient(135deg, #1a1008, #2a1a0a);
    border: 1px solid #8b5e3c44;
    border-radius: 8px;
  }

  /* Planet Brawl card */
  .game-card.planet-brawl {
    border-left-color: #1a66cc;
  }
  .game-card.planet-brawl:hover {
    border-color: #1a66cc;
    box-shadow: 0 0 30px #1a66cc15, -5px 0 20px #1a66cc10;
  }
  .game-card.planet-brawl::before {
    background: linear-gradient(90deg, #1a66cc08 0%, transparent 50%);
  }
  .game-card.planet-brawl .game-icon {
    background: linear-gradient(135deg, #08102a, #0a1a3a);
    border: 1px solid #1a66cc44;
    border-radius: 8px;
  }

  /* Coming soon cards */
  .game-card.coming-soon {
    opacity: 0.4;
    cursor: default;
    border-left-color: #444;
  }
  .game-card.coming-soon:hover {
    transform: none;
    border-color: #444;
    box-shadow: none;
  }
  .game-card.coming-soon .game-arrow {
    display: none;
  }
  .coming-soon-tag {
    font-size: 0.6rem;
    color: #666;
    background: #222;
    padding: 2px 8px;
    border-radius: 3px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .footer {
    position: fixed;
    bottom: 20px;
    font-size: 0.75rem;
    color: #444;
    letter-spacing: 0.1em;
    z-index: 1;
  }

  /* Floating particles */
  .particle {
    position: fixed;
    width: 2px;
    height: 2px;
    background: #c9a84c;
    border-radius: 50%;
    opacity: 0;
    pointer-events: none;
    animation: floatUp linear infinite;
  }
  @keyframes floatUp {
    0% { opacity: 0; transform: translateY(0); }
    10% { opacity: 0.4; }
    90% { opacity: 0.1; }
    100% { opacity: 0; transform: translateY(-100vh); }
  }

  /* ═══ SCHOOL MODE ═══ */
  .school-badge {
    display: none;
    background: #2e7d32;
    color: #fff;
    font-size: 0.6rem;
    padding: 3px 12px;
    border-radius: 12px;
    letter-spacing: 0.1em;
    margin-bottom: 8px;
    text-transform: uppercase;
  }
  .school-badge.visible { display: block; }

  .game-card.school-blocked {
    opacity: 0.3;
    pointer-events: none;
    filter: grayscale(80%);
  }
  .school-blocked-tag {
    position: absolute;
    top: 8px;
    right: 10px;
    font-size: 0.55rem;
    color: #ff4444;
    background: #ff444422;
    padding: 2px 8px;
    border-radius: 3px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    z-index: 2;
  }

  .school-input, .school-select {
    font-family: 'Cinzel', serif;
    font-size: 0.8rem;
    background: #1a1a22;
    color: #ddd;
    border: 1px solid #444;
    padding: 6px 12px;
    border-radius: 4px;
    outline: none;
    width: 100%;
  }
  .school-input:focus, .school-select:focus { border-color: #c9a84c; }
  .school-select option { background: #1a1a22; }
  .school-label {
    font-size: 0.7rem;
    color: #888;
    letter-spacing: 0.06em;
    margin-bottom: 4px;
    display: block;
  }
  .school-btn {
    font-family: 'Cinzel', serif;
    font-size: 0.75rem;
    padding: 8px 24px;
    border: 1px solid #2e7d32;
    background: #2e7d3222;
    color: #4caf50;
    cursor: pointer;
    letter-spacing: 0.08em;
    border-radius: 4px;
    transition: all 0.15s;
    width: 100%;
    margin-top: 10px;
  }
  .school-btn:hover { background: #2e7d3244; box-shadow: 0 0 15px #2e7d3222; }
  .school-btn.danger { border-color: #c62828; color: #ef5350; background: #c6282822; }
  .school-btn.danger:hover { background: #c6282844; box-shadow: 0 0 15px #c6282822; }
  .school-error {
    font-size: 0.65rem;
    color: #ef5350;
    margin-top: 4px;
    min-height: 1em;
  }
  .school-field { margin-bottom: 12px; }
  .school-status {
    font-size: 0.75rem;
    color: #4caf50;
    margin-bottom: 12px;
    padding: 8px;
    background: #2e7d3215;
    border-radius: 4px;
    border: 1px solid #2e7d3244;
  }

  /* ═══ GAME PLAYER (iframe) ═══ */
  #game-player {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 100;
    background: #000;
    flex-direction: column;
  }
  #game-player.visible { display: flex; }
  .gp-toolbar {
    height: 42px;
    background: linear-gradient(180deg, #1a1a2e, #0f0f1a);
    border-bottom: 1px solid #c9a84c44;
    display: flex;
    align-items: center;
    padding: 0 12px;
    gap: 12px;
    flex-shrink: 0;
  }
  .gp-logo {
    width: 28px;
    height: 28px;
    filter: drop-shadow(0 0 4px #2a8a4a44);
  }
  .gp-title {
    font-family: 'Cinzel', serif;
    color: #c9a84c;
    font-size: 0.8rem;
    letter-spacing: 0.08em;
    flex: 1;
  }
  .gp-timer {
    font-family: 'Cinzel Decorative', serif;
    color: #4caf50;
    font-size: 0.85rem;
    padding: 2px 10px;
    border: 1px solid #4caf5044;
    border-radius: 4px;
    background: #4caf5011;
  }
  .gp-timer.warning { color: #ff9800; border-color: #ff980044; background: #ff980011; }
  .gp-timer.danger { color: #ef5350; border-color: #ef535044; background: #ef535011; }
  .gp-exit {
    font-family: 'Cinzel', serif;
    font-size: 0.65rem;
    background: transparent;
    color: #888;
    border: 1px solid #555;
    padding: 5px 12px;
    cursor: pointer;
    letter-spacing: 0.06em;
    transition: all 0.15s;
  }
  .gp-exit:hover { color: #c9a84c; border-color: #c9a84c; }
  .gp-iframe {
    flex: 1;
    border: none;
    width: 100%;
  }

  /* ═══ QUIZ OVERLAY ═══ */
  #quiz-overlay {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 200;
    background: #000000dd;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(8px);
  }
  #quiz-overlay.visible { display: flex; }
  .quiz-panel {
    background: linear-gradient(135deg, #141418, #1a1a22);
    border: 2px solid #c9a84c;
    border-radius: 12px;
    padding: 28px;
    max-width: 480px;
    width: 90%;
    text-align: center;
    box-shadow: 0 0 60px #c9a84c22;
  }
  .quiz-subject {
    font-size: 0.65rem;
    color: #4caf50;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 8px;
  }
  .quiz-question {
    font-family: 'Cinzel', serif;
    font-size: 1.1rem;
    color: #eee;
    margin-bottom: 20px;
    line-height: 1.5;
    min-height: 60px;
  }
  .quiz-answers {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 16px;
  }
  .quiz-answer {
    font-family: 'Cinzel', serif;
    font-size: 0.8rem;
    padding: 10px 16px;
    background: #ffffff08;
    border: 1px solid #444;
    color: #ddd;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.15s;
    text-align: left;
  }
  .quiz-answer:hover { border-color: #c9a84c; background: #c9a84c11; }
  .quiz-answer.correct { border-color: #4caf50; background: #4caf5022; color: #4caf50; }
  .quiz-answer.wrong { border-color: #ef5350; background: #ef535022; color: #ef5350; }
  .quiz-answer.reveal { border-color: #4caf50; background: #4caf5022; color: #4caf50; }
  .quiz-answer.disabled { pointer-events: none; opacity: 0.6; }
  .quiz-feedback {
    font-size: 0.8rem;
    min-height: 1.5em;
    margin-bottom: 8px;
  }
  .quiz-feedback.success { color: #4caf50; }
  .quiz-feedback.fail { color: #ef5350; }
  .quiz-wait {
    font-family: 'Cinzel Decorative', serif;
    font-size: 1.2rem;
    color: #ef5350;
  }

  /* ═══ MOBILE RESPONSIVE ═══ */
  @media (max-width: 600px) {
    body {
      height: auto;
      min-height: 100vh;
      overflow: auto;
    }
    .launcher {
      height: auto;
      min-height: 100vh;
      overflow: visible;
      padding: 10px 12px 60px;
    }
    .logo {
      width: 140px;
      height: 120px;
      margin-bottom: 10px;
    }
    .title {
      font-size: 1.8rem;
      letter-spacing: 0.06em;
    }
    .divider {
      width: 200px;
      margin: 6px 0 16px;
    }
    .subtitle {
      font-size: 0.75rem;
      margin-bottom: 10px;
    }
    .gbux-bar {
      padding: 5px 14px;
      margin-bottom: 6px;
    }
    .gbux-amount { font-size: 1.1rem; }
    .launcher-nav {
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      margin-bottom: 16px;
    }
    .nav-btn {
      font-size: 0.6rem;
      padding: 6px 10px;
    }
    .game-list {
      max-width: 100%;
      flex: none;
      overflow-y: visible;
      padding-right: 0;
      gap: 10px;
      padding-bottom: 10px;
    }
    .game-card {
      padding: 14px 14px;
      gap: 12px;
    }
    .game-icon {
      width: 44px;
      height: 44px;
    }
    .game-icon svg {
      width: 38px;
      height: 38px;
    }
    .game-info .game-title {
      font-size: 1rem;
    }
    .game-info .game-desc {
      font-size: 0.7rem;
    }
    .game-card:hover {
      transform: none;
    }
    .footer {
      position: relative;
      bottom: auto;
      margin-top: 20px;
      padding-bottom: 10px;
    }
    /* Overlay panels */
    .gg-panel {
      padding: 18px;
      max-width: 95%;
      max-height: 85vh;
    }
    .quiz-panel {
      padding: 20px;
      max-width: 95%;
    }
    .quiz-question {
      font-size: 0.95rem;
      min-height: 40px;
    }
    .quiz-answer {
      font-size: 0.75rem;
      padding: 9px 12px;
    }
    /* Game player toolbar */
    .gp-toolbar {
      height: 38px;
      padding: 0 8px;
      gap: 8px;
    }
    .gp-title { font-size: 0.7rem; }
    .gp-exit { font-size: 0.6rem; padding: 4px 8px; }
    .gp-timer { font-size: 0.75rem; }
  }
</style>
</head>
<body>

<!-- Floating particles -->
<script>
for (let i = 0; i < 30; i++) {
  const p = document.createElement('div');
  p.className = 'particle';
  p.style.left = Math.random() * 100 + '%';
  p.style.bottom = '-10px';
  p.style.animationDuration = (6 + Math.random() * 8) + 's';
  p.style.animationDelay = (Math.random() * 10) + 's';
  p.style.width = p.style.height = (1 + Math.random() * 2) + 'px';
  document.body.appendChild(p);
}
</script>

<div class="launcher">

  <!-- SERPENT DOUBLE-G LOGO -->
  <svg class="logo" viewBox="0 0 300 260" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <!-- Serpent body gradient -->
      <linearGradient id="serpent1" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stop-color="#1a5c2a"/>
        <stop offset="30%" stop-color="#2a8a4a"/>
        <stop offset="50%" stop-color="#3aaa5a"/>
        <stop offset="70%" stop-color="#2a8a4a"/>
        <stop offset="100%" stop-color="#1a5c2a"/>
      </linearGradient>
      <linearGradient id="serpent2" x1="100%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" stop-color="#1a5c2a"/>
        <stop offset="30%" stop-color="#2a8a4a"/>
        <stop offset="50%" stop-color="#3aaa5a"/>
        <stop offset="70%" stop-color="#2a8a4a"/>
        <stop offset="100%" stop-color="#1a5c2a"/>
      </linearGradient>
      <!-- Scale pattern -->
      <pattern id="scales" x="0" y="0" width="8" height="8" patternUnits="userSpaceOnUse">
        <path d="M0,4 Q2,0 4,4 Q6,8 8,4" fill="none" stroke="#ffffff15" stroke-width="0.5"/>
      </pattern>
      <!-- Belly gradient -->
      <linearGradient id="belly" x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" stop-color="#4aba6a"/>
        <stop offset="100%" stop-color="#2a7a3a"/>
      </linearGradient>
      <!-- Eye glow -->
      <radialGradient id="eyeGlow">
        <stop offset="0%" stop-color="#ffdd00"/>
        <stop offset="60%" stop-color="#ff8800"/>
        <stop offset="100%" stop-color="#cc4400"/>
      </radialGradient>
    </defs>

    <!-- ═══ LEFT SERPENT forming "G" ═══ -->
    <g>
      <!-- Main body - G shape: curves from top-right, around left, bottom, and back in with the G bar -->
      <path d="M130,40 C120,25 90,15 65,20 C35,28 18,55 15,85 C12,115 18,150 35,175 C50,195 75,205 100,200 C115,196 125,185 128,170 L128,145 L95,145"
        fill="none" stroke="url(#serpent1)" stroke-width="18" stroke-linecap="round" stroke-linejoin="round"/>
      <!-- Scale overlay -->
      <path d="M130,40 C120,25 90,15 65,20 C35,28 18,55 15,85 C12,115 18,150 35,175 C50,195 75,205 100,200 C115,196 125,185 128,170 L128,145 L95,145"
        fill="none" stroke="url(#scales)" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/>
      <!-- Belly line -->
      <path d="M130,40 C120,28 92,19 67,24 C40,31 23,56 20,85 C17,113 23,148 38,172 C52,190 74,200 98,196 C112,192 121,183 124,170 L124,145 L95,145"
        fill="none" stroke="#4aba6a22" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>

      <!-- Serpent head (at start of G curve, top-right) -->
      <g transform="translate(130, 36) rotate(25)">
        <!-- Head shape -->
        <ellipse cx="0" cy="0" rx="14" ry="10" fill="#2a8a4a"/>
        <ellipse cx="0" cy="0" rx="14" ry="10" fill="url(#scales)"/>
        <!-- Snout -->
        <ellipse cx="12" cy="0" rx="7" ry="5" fill="#2a8a4a"/>
        <!-- Eye -->
        <circle cx="3" cy="-4" r="3.5" fill="url(#eyeGlow)"/>
        <ellipse cx="3" cy="-4" rx="1.5" ry="3" fill="#111"/>
        <!-- Nostril -->
        <circle cx="16" cy="-1.5" r="1" fill="#1a4a2a"/>
        <!-- Tongue -->
        <path d="M19,0 L28,-4 M19,0 L28,4" stroke="#cc3333" stroke-width="1.2" stroke-linecap="round" fill="none">
          <animate attributeName="d" values="M19,0 L28,-4 M19,0 L28,4;M19,0 L26,-6 M19,0 L26,6;M19,0 L28,-4 M19,0 L28,4" dur="1.5s" repeatCount="indefinite"/>
        </path>
        <!-- Jaw line -->
        <path d="M-8,5 Q0,10 12,4" fill="none" stroke="#1a5c2a" stroke-width="1"/>
      </g>

    </g>

    <!-- ═══ RIGHT SERPENT forming "G" ═══ -->
    <g>
      <!-- Main body - G shape mirrored -->
      <path d="M275,60 C268,42 245,30 220,32 C190,37 170,60 168,90 C165,120 172,158 190,182 C205,200 228,210 252,206 C268,202 278,190 280,176 L280,150 L248,150"
        fill="none" stroke="url(#serpent2)" stroke-width="18" stroke-linecap="round" stroke-linejoin="round"/>
      <!-- Scale overlay -->
      <path d="M275,60 C268,42 245,30 220,32 C190,37 170,60 168,90 C165,120 172,158 190,182 C205,200 228,210 252,206 C268,202 278,190 280,176 L280,150 L248,150"
        fill="none" stroke="url(#scales)" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/>
      <!-- Belly line -->
      <path d="M275,60 C268,45 247,34 222,36 C194,40 175,62 173,90 C170,118 177,155 193,178 C207,195 227,205 250,202 C264,198 274,188 276,176 L276,150 L248,150"
        fill="none" stroke="#4aba6a22" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>

      <!-- Serpent head (top of right G) -->
      <g transform="translate(277, 56) rotate(35)">
        <ellipse cx="0" cy="0" rx="14" ry="10" fill="#2a8a4a"/>
        <ellipse cx="0" cy="0" rx="14" ry="10" fill="url(#scales)"/>
        <ellipse cx="12" cy="0" rx="7" ry="5" fill="#2a8a4a"/>
        <circle cx="3" cy="-4" r="3.5" fill="url(#eyeGlow)"/>
        <ellipse cx="3" cy="-4" rx="1.5" ry="3" fill="#111"/>
        <circle cx="16" cy="-1.5" r="1" fill="#1a4a2a"/>
        <path d="M19,0 L28,-4 M19,0 L28,4" stroke="#cc3333" stroke-width="1.2" stroke-linecap="round" fill="none">
          <animate attributeName="d" values="M19,0 L28,-4 M19,0 L28,4;M19,0 L26,-6 M19,0 L26,6;M19,0 L28,-4 M19,0 L28,4" dur="1.8s" repeatCount="indefinite"/>
        </path>
        <path d="M-8,5 Q0,10 12,4" fill="none" stroke="#1a5c2a" stroke-width="1"/>
      </g>

    </g>

  </svg>

  <div class="title">GRAHAM GAMES</div>
  <div class="gbux-bar">
    <span class="gbux-icon">&#129689;</span>
    <span class="gbux-amount" id="gbux-amount">0</span>
    <span class="gbux-label">G BUX</span>
  </div>
  <div class="school-badge" id="school-badge">SCHOOL MODE ACTIVE</div>
  <div class="divider"></div>
  <div class="launcher-nav">
    <button class="nav-btn" onclick="openAchievements()">&#127942; ACHIEVEMENTS</button>
    <button class="nav-btn" onclick="openShop()">&#128176; G BUX SHOP</button>
    <button class="nav-btn" onclick="openSchoolMode()">&#127891; SCHOOL MODE</button>
  </div>

  <div class="game-list">
    <!-- HURGVIBBIT -->
    <a href="hurgvibbit/index.html" class="game-card hurgvibbit">
      <div class="game-icon">
        <svg width="50" height="50" viewBox="0 0 50 50">
          <rect x="5" y="5" width="40" height="40" rx="4" fill="#1a0808" stroke="#ff1744" stroke-width="2"/>
          <text x="25" y="20" text-anchor="middle" font-size="7" fill="#ff1744" font-family="monospace" font-weight="bold">HURG</text>
          <text x="25" y="30" text-anchor="middle" font-size="7" fill="#ffd600" font-family="monospace" font-weight="bold">VIBBIT</text>
          <!-- tiny mohawk -->
          <polygon points="25,34 22,42 20,36 18,43 24,38 26,43 28,36 30,43 28,38" fill="#ff1744"/>
          <circle cx="25" cy="44" r="4" fill="#e8b89d"/>
        </svg>
      </div>
      <div class="game-info">
        <div class="game-title">HURGVIBBIT</div>
        <div class="game-desc">Punk metal patty cake showdown</div>
      </div>
      <div class="game-arrow">&#9654;</div>
    </a>

    <!-- FLYING ACE -->
    <a href="flying-ace/index.html" class="game-card flying-ace">
      <div class="game-icon">
        <svg width="50" height="50" viewBox="0 0 50 50">
          <rect x="5" y="5" width="40" height="40" rx="4" fill="#0a1628" stroke="#4a9eff" stroke-width="2"/>
          <!-- plane diving nose-down (~60°) -->
          <g transform="translate(25,24) rotate(55)">
            <!-- fuselage -->
            <rect x="-12" y="-2" width="24" height="4" rx="2" fill="#4a9eff" opacity="0.4"/>
            <!-- wings -->
            <line x1="-3" y1="-2" x2="-3" y2="-10" stroke="#4a9eff" stroke-width="2" stroke-linecap="round"/>
            <line x1="-3" y1="2" x2="-3" y2="10" stroke="#4a9eff" stroke-width="2" stroke-linecap="round"/>
            <!-- tail fins -->
            <line x1="-12" y1="-2" x2="-14" y2="-6" stroke="#4a9eff" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="-12" y1="2" x2="-14" y2="6" stroke="#4a9eff" stroke-width="1.5" stroke-linecap="round"/>
            <!-- nose -->
            <path d="M12,-2 L16,0 L12,2" fill="#4a9eff" opacity="0.6"/>
            <!-- propeller blur -->
            <circle cx="15" cy="0" r="3" fill="none" stroke="#fff" stroke-width="0.8" opacity="0.4"/>
          </g>
          <!-- smoke trail -->
          <circle cx="12" cy="11" r="2.5" fill="#fff" opacity="0.15"/>
          <circle cx="9" cy="9" r="2" fill="#fff" opacity="0.1"/>
          <circle cx="14" cy="14" r="1.5" fill="#fff" opacity="0.12"/>
          <!-- ground -->
          <line x1="8" y1="42" x2="42" y2="42" stroke="#4a9eff" stroke-width="1" opacity="0.3"/>
          <line x1="10" y1="43" x2="40" y2="43" stroke="#4a9eff" stroke-width="0.5" opacity="0.15"/>
        </svg>
      </div>
      <div class="game-info">
        <div class="game-title">FLYING ACE</div>
        <div class="game-desc">Aviation board game</div>
      </div>
      <div class="game-arrow">&#9654;</div>
    </a>

    <!-- COMBAT -->
    <a href="combat/index.html" class="game-card combat">
      <div class="game-icon">
        <svg width="50" height="50" viewBox="0 0 50 50">
          <rect x="5" y="5" width="40" height="40" rx="4" fill="#1a0f08" stroke="#ff6d00" stroke-width="2"/>
          <!-- tank silhouette -->
          <rect x="14" y="28" width="22" height="8" rx="2" fill="#ff6d00" opacity="0.4"/>
          <rect x="18" y="23" width="14" height="7" rx="2" fill="#ff6d00" opacity="0.5"/>
          <!-- cannon -->
          <rect x="32" y="25" width="10" height="3" rx="1" fill="#ff6d00" opacity="0.6"/>
          <!-- treads -->
          <ellipse cx="17" cy="36" rx="4" ry="3" fill="none" stroke="#ff6d00" stroke-width="1" opacity="0.5"/>
          <ellipse cx="25" cy="36" rx="4" ry="3" fill="none" stroke="#ff6d00" stroke-width="1" opacity="0.5"/>
          <ellipse cx="33" cy="36" rx="4" ry="3" fill="none" stroke="#ff6d00" stroke-width="1" opacity="0.5"/>
          <!-- explosion -->
          <circle cx="15" cy="15" r="4" fill="#ff6d00" opacity="0.2"/>
          <circle cx="15" cy="15" r="2" fill="#ffab00" opacity="0.3"/>
        </svg>
      </div>
      <div class="game-info">
        <div class="game-title">COMBAT</div>
        <div class="game-desc">Retro tank battle</div>
      </div>
      <div class="game-arrow">&#9654;</div>
    </a>

    <!-- MINI LIFE -->
    <a href="mini-life/game.html" class="game-card mini-life">
      <div class="game-icon">
        <svg width="50" height="50" viewBox="0 0 50 50">
          <rect x="5" y="5" width="40" height="40" rx="4" fill="#082a08" stroke="#4caf50" stroke-width="2"/>
          <!-- house -->
          <polygon points="25,10 12,22 38,22" fill="#4caf50" opacity="0.5"/>
          <rect x="16" y="22" width="18" height="14" fill="#4caf50" opacity="0.3"/>
          <!-- door -->
          <rect x="22" y="28" width="6" height="8" rx="1" fill="#4caf50" opacity="0.5"/>
          <!-- windows -->
          <rect x="17" y="24" width="4" height="4" rx="0.5" fill="#81c784" opacity="0.6"/>
          <rect x="29" y="24" width="4" height="4" rx="0.5" fill="#81c784" opacity="0.6"/>
          <!-- person -->
          <circle cx="25" cy="42" r="2" fill="#4caf50" opacity="0.6"/>
          <rect x="24" y="39" width="2" height="3" rx="0.5" fill="#4caf50" opacity="0.5"/>
          <circle cx="25" cy="38" r="1.5" fill="#4caf50" opacity="0.6"/>
        </svg>
      </div>
      <div class="game-info">
        <div class="game-title">MINI LIFE</div>
        <div class="game-desc">3D life simulator</div>
      </div>
      <div class="game-arrow">&#9654;</div>
    </a>

    <!-- TOWER DEFENSE -->
    <a href="tower-defense/index.html" class="game-card tower-defense">
      <div class="game-icon">
        <svg width="50" height="50" viewBox="0 0 50 50">
          <rect x="5" y="5" width="40" height="40" rx="4" fill="#14081a" stroke="#9b59b6" stroke-width="2"/>
          <!-- tower/shield -->
          <rect x="20" y="12" width="10" height="20" rx="1" fill="#9b59b6" opacity="0.4"/>
          <rect x="18" y="10" width="14" height="5" rx="1" fill="#9b59b6" opacity="0.5"/>
          <!-- battlements -->
          <rect x="17" y="8" width="4" height="4" rx="0.5" fill="#9b59b6" opacity="0.6"/>
          <rect x="23" y="8" width="4" height="4" rx="0.5" fill="#9b59b6" opacity="0.6"/>
          <rect x="29" y="8" width="4" height="4" rx="0.5" fill="#9b59b6" opacity="0.6"/>
          <!-- base -->
          <rect x="14" y="32" width="22" height="4" rx="1" fill="#9b59b6" opacity="0.3"/>
          <!-- shield -->
          <path d="M25,18 L30,22 L30,28 L25,32 L20,28 L20,22 Z" fill="#9b59b6" opacity="0.3" stroke="#9b59b6" stroke-width="0.5" opacity="0.5"/>
          <!-- sword -->
          <line x1="25" y1="37" x2="25" y2="42" stroke="#9b59b6" stroke-width="1.5" opacity="0.5"/>
          <line x1="22" y1="39" x2="28" y2="39" stroke="#9b59b6" stroke-width="1" opacity="0.5"/>
        </svg>
      </div>
      <div class="game-info">
        <div class="game-title">TOWER DEFENSE</div>
        <div class="game-desc">Defend the realm</div>
      </div>
      <div class="game-arrow">&#9654;</div>
    </a>

    <!-- ANCIENT WARFARE -->
    <a href="ancient-warfare/index.html" class="game-card ancient-warfare">
      <div class="game-icon">
        <svg width="50" height="50" viewBox="0 0 50 50">
          <!-- shield shape -->
          <path d="M25 5 L42 12 L42 26 C42 36 34 44 25 47 C16 44 8 36 8 26 L8 12 Z"
                fill="#1a1008" stroke="#cd7f32" stroke-width="2" stroke-linejoin="round"/>
          <!-- shield trim -->
          <path d="M25 10 L38 15.5 L38 26 C38 33.5 32 40 25 42.5 C18 40 12 33.5 12 26 L12 15.5 Z"
                fill="none" stroke="#cd7f32" stroke-width="1" opacity="0.5"/>
          <!-- center cross emblem -->
          <line x1="25" y1="16" x2="25" y2="36" stroke="#cd7f32" stroke-width="2" stroke-linecap="round"/>
          <line x1="16" y1="24" x2="34" y2="24" stroke="#cd7f32" stroke-width="2" stroke-linecap="round"/>
          <!-- corner rivets -->
          <circle cx="25" cy="13" r="1.5" fill="#cd7f32" opacity="0.6"/>
          <circle cx="14" cy="20" r="1.5" fill="#cd7f32" opacity="0.6"/>
          <circle cx="36" cy="20" r="1.5" fill="#cd7f32" opacity="0.6"/>
          <circle cx="25" cy="39" r="1.5" fill="#cd7f32" opacity="0.6"/>
        </svg>
      </div>
      <div class="game-info">
        <div class="game-title">ANCIENT WARFARE</div>
        <div class="game-desc">3D army battle simulator</div>
      </div>
      <div class="game-arrow">&#9654;</div>
    </a>

    <!-- ROGUE DEPTHS -->
    <a href="rogue-depths/index.html" class="game-card rogue-depths">
      <div class="game-icon">
        <svg width="50" height="50" viewBox="0 0 50 50">
          <!-- dungeon archway -->
          <rect x="10" y="10" width="30" height="35" rx="2" fill="#1a1008" stroke="#8b5e3c" stroke-width="1.5"/>
          <path d="M14 10 Q25 4 36 10" fill="none" stroke="#8b5e3c" stroke-width="1.5"/>
          <!-- skull -->
          <circle cx="25" cy="23" r="6" fill="none" stroke="#8b5e3c" stroke-width="1.2" opacity="0.7"/>
          <circle cx="23" cy="22" r="1.5" fill="#8b5e3c" opacity="0.5"/>
          <circle cx="27" cy="22" r="1.5" fill="#8b5e3c" opacity="0.5"/>
          <rect x="24" y="26" width="2" height="2" rx="0.3" fill="#8b5e3c" opacity="0.4"/>
          <!-- crossed swords -->
          <line x1="16" y1="38" x2="34" y2="32" stroke="#8b5e3c" stroke-width="1.2" opacity="0.4"/>
          <line x1="16" y1="32" x2="34" y2="38" stroke="#8b5e3c" stroke-width="1.2" opacity="0.4"/>
          <!-- steps -->
          <rect x="18" y="40" width="14" height="2" fill="#8b5e3c" opacity="0.3"/>
          <rect x="20" y="42" width="10" height="2" fill="#8b5e3c" opacity="0.2"/>
        </svg>
      </div>
      <div class="game-info">
        <div class="game-title">ROGUE DEPTHS</div>
        <div class="game-desc">Dungeon crawler roguelike</div>
      </div>
      <div class="game-arrow">&#9654;</div>
    </a>

    <a href="planet-brawl/index.html" class="game-card planet-brawl">
      <div class="game-icon">
        <svg width="50" height="50" viewBox="0 0 50 50">
          <!-- rocket ship -->
          <path d="M25 8 L30 28 L27 32 L23 32 L20 28 Z" fill="#1a66cc" stroke="#4488ff" stroke-width="1"/>
          <ellipse cx="25" cy="14" rx="3" ry="4" fill="#4488ff" opacity="0.5"/>
          <!-- cockpit window -->
          <ellipse cx="25" cy="16" rx="2" ry="2.5" fill="#88bbff" opacity="0.6"/>
          <!-- fins -->
          <path d="M20 28 L15 34 L20 32 Z" fill="#1a66cc" stroke="#4488ff" stroke-width="0.8"/>
          <path d="M30 28 L35 34 L30 32 Z" fill="#1a66cc" stroke="#4488ff" stroke-width="0.8"/>
          <!-- flame -->
          <path d="M23 32 L25 40 L27 32" fill="#ff6622" opacity="0.7"/>
          <path d="M24 32 L25 37 L26 32" fill="#ffcc44" opacity="0.8"/>
          <!-- stars -->
          <circle cx="10" cy="12" r="1" fill="#4488ff" opacity="0.4"/>
          <circle cx="40" cy="20" r="0.8" fill="#4488ff" opacity="0.3"/>
          <circle cx="8" cy="35" r="0.6" fill="#4488ff" opacity="0.3"/>
          <circle cx="42" cy="10" r="0.7" fill="#4488ff" opacity="0.35"/>
        </svg>
      </div>
      <div class="game-info">
        <div class="game-title">PLANET BRAWL</div>
        <div class="game-desc">3D space combat shooter</div>
      </div>
      <div class="game-arrow">&#9654;</div>
    </a>
  </div>
  <div class="footer">GRAHAM GAMES &copy; 2026</div>
</div>

<!-- Achievements Overlay -->
<div class="gg-overlay" id="ach-overlay">
  <div class="gg-panel">
    <h2>&#127942; ACHIEVEMENTS</h2>
    <div class="gg-panel-sub" id="ach-progress">0 / 20 earned</div>
    <div id="ach-list"></div>
    <button class="gg-close" onclick="closeAchievements()">CLOSE</button>
  </div>
</div>

<!-- Shop Overlay -->
<div class="gg-overlay" id="shop-overlay">
  <div class="gg-panel">
    <h2>&#128176; G BUX SHOP</h2>
    <div class="shop-bal">Balance: <span id="shop-balance">0</span> G Bux</div>
    <div id="shop-list"></div>
    <button class="gg-close" onclick="closeShop()">CLOSE</button>
  </div>
</div>

<!-- School Mode Overlay -->
<div class="gg-overlay" id="school-overlay">
  <div class="gg-panel">
    <h2>&#127891; SCHOOL MODE</h2>
    <div class="gg-panel-sub">Parental controls &amp; learning quizzes</div>
    <div id="school-content"></div>
    <button class="gg-close" onclick="closeSchoolMode()">CLOSE</button>
  </div>
</div>

<!-- Game Player (iframe container for school mode) -->
<div id="game-player">
  <div class="gp-toolbar">
    <svg class="gp-logo" viewBox="0 0 300 260" xmlns="http://www.w3.org/2000/svg">
      <path d="M130,40 C120,25 90,15 65,20 C35,28 18,55 15,85 C12,115 18,150 35,175 C50,195 75,205 100,200 C115,196 125,185 128,170 L128,145 L95,145" fill="none" stroke="#2a8a4a" stroke-width="18" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M275,60 C268,42 245,30 220,32 C190,37 170,60 168,90 C165,120 172,158 190,182 C205,200 228,210 252,206 C268,202 278,190 280,176 L280,150 L248,150" fill="none" stroke="#2a8a4a" stroke-width="18" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <div class="gp-title" id="gp-title">GAME</div>
    <div class="gp-timer" id="gp-timer">2:00</div>
    <button class="gp-exit" onclick="exitGamePlayer()">EXIT TO LAUNCHER</button>
  </div>
  <iframe class="gp-iframe" id="gp-iframe" allow="pointer-lock"></iframe>
</div>

<!-- Quiz Overlay -->
<div id="quiz-overlay">
  <div class="quiz-panel">
    <div class="quiz-subject" id="quiz-subject">MATH</div>
    <div class="quiz-question" id="quiz-question">Loading...</div>
    <div class="quiz-answers" id="quiz-answers"></div>
    <div class="quiz-feedback" id="quiz-feedback"></div>
    <div class="quiz-wait" id="quiz-wait"></div>
  </div>
</div>

<script>
// ═══ G BUX SYSTEM ═══
const GG_KEY = 'graham-games-data';
function ggLoad() {
  try { return JSON.parse(localStorage.getItem(GG_KEY)) || { gBux: 0, achievements: {}, shopPurchases: {} }; }
  catch(e) { return { gBux: 0, achievements: {}, shopPurchases: {} }; }
}
function ggSave(data) { localStorage.setItem(GG_KEY, JSON.stringify(data)); }

// ═══ ACHIEVEMENT DATA ═══
const ALL_ACHIEVEMENTS = [
  { group: 'HURGVIBBIT', items: [
    { id: 'hurv_first_timer',   name: 'First Timer',     desc: 'Complete a round',             reward: 5 },
    { id: 'hurv_combo_10',      name: 'Combo Starter',   desc: 'Get a 10x combo',              reward: 10 },
    { id: 'hurv_grade_a',       name: 'Grade A Student',  desc: 'Get an A grade',               reward: 15 },
    { id: 'hurv_grade_s',       name: 'Perfectionist',   desc: 'Get an S grade',               reward: 25 },
    { id: 'hurv_combo_25',      name: 'Combo King',      desc: 'Get a 25x combo',              reward: 20 },
    { id: 'hurv_hard_complete', name: 'Hard Rocker',     desc: 'Complete all rounds on Hard',   reward: 30 },
    { id: 'hurv_score_5000',    name: 'Score Hunter',    desc: 'Reach 5,000 points',           reward: 15 },
    { id: 'hurv_score_15000',   name: 'Score Legend',    desc: 'Reach 15,000 points',          reward: 25 },
    { id: 'hurv_flawless',      name: 'Flawless',        desc: '100% hit rate on any round',   reward: 30 },
    { id: 'hurv_rhythm_master', name: 'Rhythm Master',   desc: 'Get S grade on Hard',          reward: 50 },
  ]},
  { group: 'MINI LIFE', items: [
    { id: 'ml_new_home',          name: 'New Home',          desc: 'Start your first game',             reward: 5 },
    { id: 'ml_survivor',          name: 'Survivor',          desc: 'Survive 3 days',                    reward: 10 },
    { id: 'ml_week_warrior',      name: 'Week Warrior',      desc: 'Survive 7 days',                    reward: 20 },
    { id: 'ml_shopaholic',        name: 'Shopaholic',        desc: 'Buy any furniture',                 reward: 10 },
    { id: 'ml_interior_designer', name: 'Interior Designer', desc: 'Buy all 4 furniture items',         reward: 25 },
    { id: 'ml_fashion_icon',      name: 'Fashion Icon',      desc: 'Buy any outfit',                    reward: 10 },
    { id: 'ml_moving_up',         name: 'Moving Up',         desc: 'Buy the second floor',              reward: 20 },
    { id: 'ml_arcade_pro',        name: 'Arcade Pro',        desc: 'Score 25+ in computer minigame',    reward: 15 },
    { id: 'ml_high_roller',       name: 'High Roller',       desc: 'Have $500 at once',                 reward: 20 },
    { id: 'ml_living_large',      name: 'Living Large',      desc: 'Own everything',                    reward: 50 },
    { id: 'ml_bookworm',          name: 'Knowledge is Power', desc: 'Read 3 books',                     reward: 50 },
    { id: 'ml_gym_rat',           name: 'Gym Rat',            desc: 'Use the treadmill 3 times',        reward: 50 },
    { id: 'ml_helpful_neighbor',  name: 'Helpful Neighbor',   desc: 'Complete a town quest',             reward: 25 },
    { id: 'ml_town_hero',         name: 'Town Hero',          desc: 'Complete all 4 town quests',        reward: 50 },
    { id: 'ml_mansion_mogul',     name: 'Mansion Mogul',      desc: 'Purchase the mansion',              reward: 75 },
    { id: 'ml_first_shift',       name: 'First Shift',        desc: 'Complete a town job',               reward: 10 },
    { id: 'ml_hard_worker',       name: 'Hard Worker',        desc: 'Complete 10 town job shifts',       reward: 25 },
    { id: 'ml_employee_month',    name: 'Employee of the Month', desc: 'Complete 25 town job shifts',    reward: 50 },
  ]},
  { group: 'TOWER DEFENSE', items: [
    { id: 'td_first_blood',   name: 'First Blood',        desc: 'Kill your first enemy',           reward: 5 },
    { id: 'td_wave_5',        name: 'Getting Started',     desc: 'Complete wave 5',                 reward: 10 },
    { id: 'td_wave_10',       name: 'Holding Strong',      desc: 'Complete wave 10',                reward: 15 },
    { id: 'td_wave_20',       name: 'Veteran Defender',     desc: 'Complete wave 20',                reward: 25 },
    { id: 'td_all_towers',    name: 'Arsenal',             desc: 'Build all 4 tower types in one game', reward: 10 },
    { id: 'td_max_upgrade',   name: 'Fully Loaded',        desc: 'Fully upgrade any tower',         reward: 15 },
    { id: 'td_rich',          name: 'War Chest',           desc: 'Have 500+ gold at once',          reward: 10 },
    { id: 'td_no_leaks_10',   name: 'Impenetrable',        desc: 'Reach wave 10 with 20 lives',     reward: 25 },
    { id: 'td_speed_demon',   name: 'Speed Demon',         desc: 'Complete wave 15+ on 2x speed',   reward: 20 },
    { id: 'td_victory',       name: 'Supreme Commander',   desc: 'Beat wave 30',                    reward: 50 },
  ]},
  { group: 'ANCIENT WARFARE', items: [
    { id: 'aw_first_battle',   name: 'First Blood',        desc: 'Complete a battle',               reward: 5 },
    { id: 'aw_victor',         name: 'Victorious',          desc: 'Win a battle',                    reward: 10 },
    { id: 'aw_flawless',       name: 'Flawless Victory',    desc: 'Win without losing a unit',       reward: 30 },
    { id: 'aw_cavalry_charge', name: 'Cavalry Charge',      desc: 'Win with 5+ cavalry',             reward: 15 },
    { id: 'aw_archer_army',    name: 'Rain of Arrows',      desc: 'Win with 5+ archers',             reward: 15 },
    { id: 'aw_balanced',       name: 'Balanced Forces',      desc: 'Win using all 5 base unit types', reward: 20 },
    { id: 'aw_underdog',       name: 'Underdog',            desc: 'Win outnumbered 2:1',             reward: 25 },
    { id: 'aw_speed_demon',    name: 'Blitz',               desc: 'Win in under 30 seconds',         reward: 20 },
    { id: 'aw_commander',      name: 'Commander',            desc: 'Win 5 battles',                   reward: 25 },
    { id: 'aw_warlord',        name: 'Warlord',              desc: 'Win 10 battles',                  reward: 50 },
  ]},
  { group: 'ROGUE DEPTHS', items: [
    { id: 'rd_first_blood',   name: 'First Blood',     desc: 'Kill your first enemy',              reward: 5 },
    { id: 'rd_floor_5',       name: 'Into the Deep',    desc: 'Reach floor 5',                      reward: 10 },
    { id: 'rd_floor_10',      name: 'Almost There',     desc: 'Reach floor 10',                     reward: 20 },
    { id: 'rd_floor_15',      name: 'Rock Bottom',       desc: 'Reach floor 15',                     reward: 30 },
    { id: 'rd_boss_slayer',   name: 'Boss Slayer',       desc: 'Defeat any boss',                    reward: 15 },
    { id: 'rd_dragon_slayer', name: 'Dragon Slayer',     desc: 'Defeat the Ancient Dragon',          reward: 50 },
    { id: 'rd_rare_find',     name: 'Rare Find',         desc: 'Find a rare or better weapon',       reward: 10 },
    { id: 'rd_hoarder',       name: 'Gold Hoarder',      desc: 'Collect 500+ gold in one run',       reward: 15 },
    { id: 'rd_speedrun',      name: 'Speed Runner',      desc: 'Clear a floor in under 30 seconds',  reward: 20 },
    { id: 'rd_no_hit_boss',   name: 'Untouchable',       desc: 'Beat a boss without taking damage',  reward: 25 },
  ]},
  { group: 'PLANET BRAWL', items: [
    { id: 'pb_first_kill',    name: 'First Contact',     desc: 'Kill your first enemy',                reward: 5 },
    { id: 'pb_planet_1',      name: 'Zortotie Saved',    desc: 'Liberate the first planet',            reward: 10 },
    { id: 'pb_planet_3',      name: 'Halfway Home',       desc: 'Liberate three planets',               reward: 15 },
    { id: 'pb_planet_6',      name: 'Galaxy Savior',      desc: 'Liberate all six planets',              reward: 50 },
    { id: 'pb_ace',           name: 'Space Ace',          desc: 'Kill 10+ enemies in one space phase',   reward: 20 },
    { id: 'pb_no_hit_space',  name: 'Untouchable',        desc: 'Complete a space phase with no damage', reward: 25 },
    { id: 'pb_boss_slayer',   name: 'Boss Slayer',         desc: 'Defeat the Wintot boss',               reward: 30 },
    { id: 'pb_speed_clear',   name: 'Speed Demon',        desc: 'Clear a planet phase in under 20s',    reward: 15 },
    { id: 'pb_sharpshooter',  name: 'Sharpshooter',       desc: '80%+ accuracy in a space phase',       reward: 15 },
    { id: 'pb_survivor',      name: 'Iron Hull',           desc: 'Finish a planet with full HP',         reward: 15 },
  ]},
];

const SHOP_ITEMS = [
  { id: 'hurv_neon_theme', name: 'Neon Theme',     desc: 'Neon color scheme for Hurgvibbit',        cost: 50,  icon: '&#127752;', game: 'Hurgvibbit' },
  { id: 'hurv_turbo_mode', name: 'Turbo Mode',     desc: 'Insanely fast difficulty for Hurgvibbit',  cost: 75,  icon: '&#9889;',   game: 'Hurgvibbit' },
  { id: 'ml_pet_dog',      name: 'Pet Dog',         desc: 'A loyal dog that follows you around',     cost: 50,  icon: '&#128054;', game: 'Mini Life' },
  { id: 'ml_pool',         name: 'Swimming Pool',   desc: 'Outdoor pool — restores fun & hygiene',   cost: 100, icon: '&#127946;', game: 'Mini Life' },
  { id: 'ml_basement',     name: 'Basement',        desc: 'Underground expansion with workbench',    cost: 150, icon: '<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 8h6v4h6v4h6v4h2v4H4V8z" fill="#8b7355"/><path d="M4 8h6v4h6v4h6v4h2v4H24v-4h-6v-4h-6v-4H6v-4H4z" stroke="#5a4a32" stroke-width="1"/><path d="M4 8h6v1H4zM10 12h6v1h-6zM16 16h6v1h-6zM22 20h2v1h-2z" fill="#a08960"/></svg>', game: 'Mini Life' },
  { id: 'td_flame_tower', name: 'Flame Tower',     desc: 'Unlocks the Flame tower type',            cost: 75,  icon: '&#128293;', game: 'Tower Defense' },
  { id: 'td_double_gold', name: 'War Bonds',       desc: 'Start each game with $200 instead of $100', cost: 50, icon: '&#128176;', game: 'Tower Defense' },
  { id: 'aw_war_elephant', name: 'War Elephant',   desc: 'Unlocks the War Elephant unit type',      cost: 75,  icon: '&#128024;', game: 'Ancient Warfare' },
  { id: 'aw_battle_horn',  name: 'Battle Horn',     desc: '+10% damage for first 10s of battle',     cost: 50,  icon: '&#128239;', game: 'Ancient Warfare' },
  { id: 'rd_shadow_class',    name: 'Rogue Class',       desc: 'Unlocks the Rogue class (fast, backstab)',     cost: 75, icon: '&#128065;', game: 'Rogue Depths' },
  { id: 'rd_enchanted_start', name: 'Enchanted Start',   desc: 'Start each run with an uncommon weapon',       cost: 50, icon: '&#10024;',  game: 'Rogue Depths' },
];

// ═══ ACHIEVEMENTS PANEL ═══
function openAchievements() {
  const data = ggLoad();
  const container = document.getElementById('ach-list');
  container.innerHTML = '';
  let earned = 0, total = 0;
  for (const group of ALL_ACHIEVEMENTS) {
    const title = document.createElement('div');
    title.className = 'ach-group';
    title.textContent = group.group;
    container.appendChild(title);
    for (const ach of group.items) {
      total++;
      const has = !!data.achievements[ach.id];
      if (has) earned++;
      const div = document.createElement('div');
      div.className = 'ach-item ' + (has ? 'earned' : 'locked');
      div.innerHTML = '<div class="ach-icon">' + (has ? '&#9733;' : '&#9744;') + '</div>' +
        '<div class="ach-info"><div class="ach-name">' + ach.name + '</div>' +
        '<div class="ach-desc">' + ach.desc + '</div></div>' +
        '<div class="ach-reward">' + (has ? '&#9989;' : ach.reward + ' G') + '</div>';
      container.appendChild(div);
    }
  }
  document.getElementById('ach-progress').textContent = earned + ' / ' + total + ' earned';
  document.getElementById('ach-overlay').classList.add('visible');
}
function closeAchievements() { document.getElementById('ach-overlay').classList.remove('visible'); }

// ═══ SHOP PANEL ═══
function openShop() {
  const data = ggLoad();
  document.getElementById('shop-balance').textContent = data.gBux;
  const container = document.getElementById('shop-list');
  container.innerHTML = '';
  for (const item of SHOP_ITEMS) {
    const owned = !!data.shopPurchases[item.id];
    const canAfford = data.gBux >= item.cost;
    const div = document.createElement('div');
    div.className = 'shop-item';
    div.innerHTML = '<div class="shop-item-icon">' + item.icon + '</div>' +
      '<div class="shop-item-info"><div class="shop-item-name">' + item.name + '</div>' +
      '<div class="shop-item-desc">' + item.desc + '</div>' +
      '<div class="shop-item-game">For: ' + item.game + '</div></div>';
    const btn = document.createElement('button');
    if (owned) { btn.className = 'shop-buy owned'; btn.textContent = 'OWNED'; }
    else if (!canAfford) { btn.className = 'shop-buy locked'; btn.textContent = item.cost + ' G'; }
    else {
      btn.className = 'shop-buy';
      btn.textContent = item.cost + ' G';
      btn.onclick = () => { purchaseItem(item.id, item.cost); openShop(); };
    }
    div.appendChild(btn);
    container.appendChild(div);
  }
  document.getElementById('shop-overlay').classList.add('visible');
}
function closeShop() { document.getElementById('shop-overlay').classList.remove('visible'); }
function purchaseItem(id, cost) {
  const data = ggLoad();
  if (data.shopPurchases[id] || data.gBux < cost) return;
  data.gBux -= cost;
  data.shopPurchases[id] = true;
  ggSave(data);
  document.getElementById('gbux-amount').textContent = data.gBux;
}

// ═══ REFRESH ON FOCUS ═══
function refreshGBux() {
  document.getElementById('gbux-amount').textContent = ggLoad().gBux;
}
window.addEventListener('focus', refreshGBux);
window.addEventListener('pageshow', refreshGBux);
refreshGBux();

// ═══ SCHOOL MODE ═══
const BLOCKED_GAMES = ['combat', 'ancient-warfare'];

function getSchoolMode() {
  const data = ggLoad();
  return data.schoolMode || null;
}
function setSchoolMode(sm) {
  const data = ggLoad();
  data.schoolMode = sm;
  ggSave(data);
}

function getQuizInterval() {
  const sm = getSchoolMode();
  return (sm && sm.interval) ? sm.interval : 120;
}
function formatInterval(seconds) {
  if (seconds < 60) return seconds + 's';
  const m = seconds / 60;
  return m + (m === 1 ? ' min' : ' min');
}

function openSchoolMode() {
  const container = document.getElementById('school-content');
  const sm = getSchoolMode();
  if (sm && sm.enabled) {
    container.innerHTML =
      '<div class="school-status">School Mode is ACTIVE — Subject: ' + sm.subject.charAt(0).toUpperCase() + sm.subject.slice(1) + ' — Quiz every ' + formatInterval(sm.interval || 120) + '</div>' +
      '<div class="school-field"><label class="school-label">Enter PIN to disable</label>' +
      '<input type="password" class="school-input" id="school-pin-off" maxlength="4" inputmode="numeric" placeholder="4-digit PIN"></div>' +
      '<div class="school-error" id="school-error-off"></div>' +
      '<button class="school-btn danger" onclick="disableSchoolMode()">DISABLE SCHOOL MODE</button>';
  } else {
    container.innerHTML =
      '<div class="school-field"><label class="school-label">Subject</label>' +
      '<select class="school-select" id="school-subject">' +
      '<option value="math">Math</option><option value="science">Science</option>' +
      '<option value="english">English</option><option value="history">History</option></select></div>' +
      '<div class="school-field"><label class="school-label">Quiz Interval</label>' +
      '<select class="school-select" id="school-interval">' +
      '<option value="30">30 seconds</option><option value="60">1 minute</option>' +
      '<option value="120" selected>2 minutes</option><option value="180">3 minutes</option>' +
      '<option value="240">4 minutes</option><option value="300">5 minutes</option></select></div>' +
      '<div class="school-field"><label class="school-label">Set PIN (4 digits)</label>' +
      '<input type="password" class="school-input" id="school-pin" maxlength="4" inputmode="numeric" placeholder="4-digit PIN"></div>' +
      '<div class="school-field"><label class="school-label">Confirm PIN</label>' +
      '<input type="password" class="school-input" id="school-pin-confirm" maxlength="4" inputmode="numeric" placeholder="Confirm PIN"></div>' +
      '<div class="school-error" id="school-error-on"></div>' +
      '<button class="school-btn" onclick="enableSchoolMode()">ENABLE SCHOOL MODE</button>';
  }
  document.getElementById('school-overlay').classList.add('visible');
}
function closeSchoolMode() { document.getElementById('school-overlay').classList.remove('visible'); }

function enableSchoolMode() {
  const pin = document.getElementById('school-pin').value;
  const confirm = document.getElementById('school-pin-confirm').value;
  const subject = document.getElementById('school-subject').value;
  const interval = parseInt(document.getElementById('school-interval').value);
  const err = document.getElementById('school-error-on');
  if (!/^\d{4}$/.test(pin)) { err.textContent = 'PIN must be exactly 4 digits'; return; }
  if (pin !== confirm) { err.textContent = 'PINs do not match'; return; }
  setSchoolMode({ enabled: true, pin: pin, subject: subject, interval: interval });
  applySchoolMode();
  closeSchoolMode();
}

function disableSchoolMode() {
  const pin = document.getElementById('school-pin-off').value;
  const err = document.getElementById('school-error-off');
  const sm = getSchoolMode();
  if (!sm) return;
  if (pin !== sm.pin) { err.textContent = 'Incorrect PIN'; return; }
  setSchoolMode(null);
  applySchoolMode();
  closeSchoolMode();
}

function applySchoolMode() {
  const sm = getSchoolMode();
  const badge = document.getElementById('school-badge');
  badge.classList.toggle('visible', !!(sm && sm.enabled));
  const cards = document.querySelectorAll('.game-card');
  cards.forEach(card => {
    const isBlocked = BLOCKED_GAMES.some(cls => card.classList.contains(cls));
    card.classList.toggle('school-blocked', !!(sm && sm.enabled && isBlocked));
    const existingTag = card.querySelector('.school-blocked-tag');
    if (existingTag) existingTag.remove();
    if (sm && sm.enabled && isBlocked) {
      const tag = document.createElement('span');
      tag.className = 'school-blocked-tag';
      tag.textContent = 'BLOCKED';
      card.appendChild(tag);
    }
  });
}

// ═══ GAME CARD INTERCEPTION (School Mode) ═══
document.querySelector('.game-list').addEventListener('click', function(e) {
  const sm = getSchoolMode();
  if (!sm || !sm.enabled) return;
  const card = e.target.closest('.game-card');
  if (!card) return;
  if (card.classList.contains('school-blocked')) return;
  e.preventDefault();
  const href = card.getAttribute('href');
  const titleEl = card.querySelector('.game-title');
  const title = titleEl ? titleEl.textContent : 'GAME';
  openGamePlayer(href, title);
});

// ═══ GAME PLAYER ═══
let quizTimerInterval = null;
let quizTimeLeft = 120;
let quizActive = false;

function openGamePlayer(href, title) {
  document.getElementById('gp-title').textContent = title;
  document.getElementById('gp-iframe').src = href;
  document.getElementById('game-player').classList.add('visible');
  quizActive = false;
  quizTimeLeft = getQuizInterval();
  updateTimerDisplay();
  startQuizTimer();
}

function exitGamePlayer() {
  if (quizActive) return;
  stopQuizTimer();
  document.getElementById('game-player').classList.remove('visible');
  document.getElementById('gp-iframe').src = '';
  hideQuiz();
}

function startQuizTimer() {
  stopQuizTimer();
  quizTimerInterval = setInterval(function() {
    if (quizActive) return;
    quizTimeLeft--;
    updateTimerDisplay();
    if (quizTimeLeft <= 0) {
      stopQuizTimer();
      showQuiz();
    }
  }, 1000);
}

function stopQuizTimer() {
  if (quizTimerInterval) { clearInterval(quizTimerInterval); quizTimerInterval = null; }
}

function updateTimerDisplay() {
  const el = document.getElementById('gp-timer');
  const m = Math.floor(quizTimeLeft / 60);
  const s = quizTimeLeft % 60;
  el.textContent = m + ':' + (s < 10 ? '0' : '') + s;
  el.classList.remove('warning', 'danger');
  if (quizTimeLeft <= 15) el.classList.add('danger');
  else if (quizTimeLeft <= 30) el.classList.add('warning');
}

// ═══ QUESTION BANKS ═══
const SCIENCE_QUESTIONS = [
  { q: 'What planet is closest to the Sun?', a: 'Mercury', w: ['Venus', 'Earth', 'Mars'] },
  { q: 'What gas do plants absorb from the air?', a: 'Carbon dioxide', w: ['Oxygen', 'Nitrogen', 'Helium'] },
  { q: 'How many legs does an insect have?', a: '6', w: ['4', '8', '10'] },
  { q: 'What is the largest planet in our solar system?', a: 'Jupiter', w: ['Saturn', 'Neptune', 'Earth'] },
  { q: 'What do you call animals that eat only plants?', a: 'Herbivores', w: ['Carnivores', 'Omnivores', 'Insectivores'] },
  { q: 'Water freezes at what temperature in Fahrenheit?', a: '32 degrees', w: ['0 degrees', '100 degrees', '212 degrees'] },
  { q: 'What is the hardest natural substance on Earth?', a: 'Diamond', w: ['Gold', 'Iron', 'Quartz'] },
  { q: 'What organ pumps blood through the body?', a: 'Heart', w: ['Lungs', 'Brain', 'Liver'] },
  { q: 'What are the three states of matter?', a: 'Solid, liquid, gas', w: ['Hot, warm, cold', 'Big, medium, small', 'Light, dark, clear'] },
  { q: 'What force keeps us on the ground?', a: 'Gravity', w: ['Magnetism', 'Friction', 'Wind'] },
  { q: 'What star is closest to Earth?', a: 'The Sun', w: ['Polaris', 'Sirius', 'Alpha Centauri'] },
  { q: 'What is a baby frog called?', a: 'Tadpole', w: ['Cub', 'Pup', 'Kitten'] },
  { q: 'Which planet is known as the Red Planet?', a: 'Mars', w: ['Venus', 'Jupiter', 'Saturn'] },
  { q: 'What do caterpillars turn into?', a: 'Butterflies', w: ['Beetles', 'Spiders', 'Dragonflies'] },
  { q: 'How many bones does an adult human have?', a: '206', w: ['100', '306', '150'] },
  { q: 'What is the boiling point of water in Celsius?', a: '100 degrees', w: ['50 degrees', '200 degrees', '0 degrees'] },
  { q: 'What type of animal is a whale?', a: 'Mammal', w: ['Fish', 'Reptile', 'Amphibian'] },
  { q: 'What is the largest ocean on Earth?', a: 'Pacific Ocean', w: ['Atlantic Ocean', 'Indian Ocean', 'Arctic Ocean'] },
  { q: 'What part of the plant makes food from sunlight?', a: 'Leaves', w: ['Roots', 'Stem', 'Flowers'] },
  { q: 'What is the process plants use to make food called?', a: 'Photosynthesis', w: ['Respiration', 'Digestion', 'Evaporation'] },
  { q: 'What are the tiny building blocks of all living things?', a: 'Cells', w: ['Atoms', 'Molecules', 'Tissues'] },
  { q: 'Which gas makes up most of Earth\'s atmosphere?', a: 'Nitrogen', w: ['Oxygen', 'Carbon dioxide', 'Hydrogen'] },
  { q: 'What type of rock is formed by volcanic eruption?', a: 'Igneous', w: ['Sedimentary', 'Metamorphic', 'Limestone'] },
  { q: 'What is the layer of air around the Earth called?', a: 'Atmosphere', w: ['Biosphere', 'Lithosphere', 'Hydrosphere'] },
  { q: 'What is the speed of light approximately?', a: '186,000 miles per second', w: ['1,000 miles per hour', '700 miles per hour', '86,000 miles per second'] },
];

const ENGLISH_QUESTIONS = [
  { q: 'What is a synonym for "happy"?', a: 'Joyful', w: ['Sad', 'Angry', 'Tired'] },
  { q: 'What is the opposite of "hot"?', a: 'Cold', w: ['Warm', 'Wet', 'Dry'] },
  { q: 'Which word is a noun?', a: 'Dog', w: ['Run', 'Quickly', 'Beautiful'] },
  { q: 'Which word is a verb?', a: 'Jump', w: ['Table', 'Happy', 'Slowly'] },
  { q: 'Which is spelled correctly?', a: 'Necessary', w: ['Necessery', 'Neccessary', 'Necesary'] },
  { q: 'What is the plural of "child"?', a: 'Children', w: ['Childs', 'Childrens', 'Childes'] },
  { q: 'Which word is an adjective?', a: 'Bright', w: ['Walk', 'House', 'Quickly'] },
  { q: 'What is a synonym for "big"?', a: 'Large', w: ['Small', 'Tiny', 'Short'] },
  { q: 'What is the opposite of "begin"?', a: 'End', w: ['Start', 'Continue', 'Pause'] },
  { q: 'Which is spelled correctly?', a: 'Because', w: ['Becuase', 'Becouse', 'Becuz'] },
  { q: 'What is the past tense of "run"?', a: 'Ran', w: ['Runned', 'Runed', 'Running'] },
  { q: 'Which word is an adverb?', a: 'Slowly', w: ['Slow', 'Table', 'Green'] },
  { q: 'What punctuation ends a question?', a: 'Question mark', w: ['Period', 'Exclamation mark', 'Comma'] },
  { q: 'Which is a complete sentence?', a: 'The cat sat on the mat.', w: ['Running fast.', 'Very big.', 'Under the table.'] },
  { q: 'What is a synonym for "small"?', a: 'Tiny', w: ['Huge', 'Wide', 'Tall'] },
  { q: 'What is the opposite of "light"?', a: 'Dark', w: ['Bright', 'White', 'Clear'] },
  { q: 'Which is spelled correctly?', a: 'Separate', w: ['Seperate', 'Separete', 'Seprate'] },
  { q: 'What is the plural of "mouse"?', a: 'Mice', w: ['Mouses', 'Mices', 'Mouse'] },
  { q: 'What part of speech is "the"?', a: 'Article', w: ['Noun', 'Verb', 'Adjective'] },
  { q: 'What is the past tense of "eat"?', a: 'Ate', w: ['Eated', 'Eaten', 'Eating'] },
  { q: 'Which word means "to find out"?', a: 'Discover', w: ['Forget', 'Hide', 'Ignore'] },
  { q: 'What is a group of related sentences called?', a: 'Paragraph', w: ['Chapter', 'Word', 'Letter'] },
  { q: 'Which is a proper noun?', a: 'London', w: ['city', 'dog', 'river'] },
  { q: 'What is the opposite of "quiet"?', a: 'Loud', w: ['Silent', 'Soft', 'Calm'] },
  { q: 'What does "abbreviate" mean?', a: 'To shorten', w: ['To lengthen', 'To repeat', 'To replace'] },
];

const HISTORY_QUESTIONS = [
  { q: 'Who was the first President of the United States?', a: 'George Washington', w: ['Thomas Jefferson', 'Abraham Lincoln', 'John Adams'] },
  { q: 'What ancient civilization built the pyramids?', a: 'Egyptians', w: ['Romans', 'Greeks', 'Aztecs'] },
  { q: 'Who invented the light bulb?', a: 'Thomas Edison', w: ['Benjamin Franklin', 'Nikola Tesla', 'Alexander Bell'] },
  { q: 'What country gifted the Statue of Liberty to the US?', a: 'France', w: ['England', 'Spain', 'Italy'] },
  { q: 'What year did Christopher Columbus reach the Americas?', a: '1492', w: ['1776', '1066', '1620'] },
  { q: 'What famous ship sank in 1912?', a: 'Titanic', w: ['Mayflower', 'Santa Maria', 'Lusitania'] },
  { q: 'Who was known as the "King of Rock and Roll"?', a: 'Elvis Presley', w: ['Michael Jackson', 'John Lennon', 'Chuck Berry'] },
  { q: 'What ancient wonder was in the city of Babylon?', a: 'Hanging Gardens', w: ['Great Pyramid', 'Colosseum', 'Parthenon'] },
  { q: 'Which president freed the slaves?', a: 'Abraham Lincoln', w: ['George Washington', 'Thomas Jefferson', 'Theodore Roosevelt'] },
  { q: 'What is the longest wall ever built?', a: 'Great Wall of China', w: ['Hadrian\'s Wall', 'Berlin Wall', 'Wall of Babylon'] },
  { q: 'Who was the first person to walk on the Moon?', a: 'Neil Armstrong', w: ['Buzz Aldrin', 'John Glenn', 'Yuri Gagarin'] },
  { q: 'What ancient civilization created the Olympic Games?', a: 'Greeks', w: ['Romans', 'Egyptians', 'Persians'] },
  { q: 'What holiday celebrates American independence?', a: 'Fourth of July', w: ['Thanksgiving', 'Memorial Day', 'Labor Day'] },
  { q: 'Who wrote the Declaration of Independence?', a: 'Thomas Jefferson', w: ['George Washington', 'Benjamin Franklin', 'James Madison'] },
  { q: 'What was the name of the ship the Pilgrims sailed on?', a: 'Mayflower', w: ['Santa Maria', 'Titanic', 'Discovery'] },
  { q: 'What empire built the Colosseum in Rome?', a: 'Roman Empire', w: ['Greek Empire', 'Ottoman Empire', 'Persian Empire'] },
  { q: 'Who painted the Mona Lisa?', a: 'Leonardo da Vinci', w: ['Michelangelo', 'Picasso', 'Van Gogh'] },
  { q: 'What continent did ancient Aztecs live on?', a: 'North America', w: ['South America', 'Europe', 'Africa'] },
  { q: 'Who invented the telephone?', a: 'Alexander Graham Bell', w: ['Thomas Edison', 'Nikola Tesla', 'Samuel Morse'] },
  { q: 'What was the first animal sent into space?', a: 'Fruit flies', w: ['Dog', 'Monkey', 'Cat'] },
  { q: 'Which explorer sailed around the world first?', a: 'Ferdinand Magellan', w: ['Christopher Columbus', 'Marco Polo', 'Vasco da Gama'] },
  { q: 'What material did ancient Egyptians write on?', a: 'Papyrus', w: ['Paper', 'Clay', 'Silk'] },
  { q: 'What famous document begins with "We the People"?', a: 'U.S. Constitution', w: ['Declaration of Independence', 'Bill of Rights', 'Magna Carta'] },
  { q: 'What is the oldest known civilization?', a: 'Sumerians', w: ['Egyptians', 'Greeks', 'Chinese'] },
  { q: 'Who discovered gravity by watching an apple fall?', a: 'Isaac Newton', w: ['Galileo', 'Einstein', 'Copernicus'] },
];

function generateMathQuestion() {
  const ops = ['+', '-', '\u00d7', '\u00f7'];
  const op = ops[Math.floor(Math.random() * ops.length)];
  let a, b, answer;
  if (op === '+') {
    a = Math.floor(Math.random() * 12) + 1;
    b = Math.floor(Math.random() * 12) + 1;
    answer = a + b;
  } else if (op === '-') {
    a = Math.floor(Math.random() * 12) + 1;
    b = Math.floor(Math.random() * a) + 1;
    answer = a - b;
  } else if (op === '\u00d7') {
    a = Math.floor(Math.random() * 12) + 1;
    b = Math.floor(Math.random() * 12) + 1;
    answer = a * b;
  } else {
    b = Math.floor(Math.random() * 11) + 2;
    answer = Math.floor(Math.random() * 12) + 1;
    a = b * answer;
  }
  const wrongSet = new Set();
  while (wrongSet.size < 3) {
    let w = answer + (Math.floor(Math.random() * 10) - 5);
    if (w !== answer && w >= 0) wrongSet.add(w);
  }
  return { q: 'What is ' + a + ' ' + op + ' ' + b + '?', a: String(answer), w: Array.from(wrongSet).map(String) };
}

let recentQuestions = [];

function getQuestion(subject) {
  let question;
  if (subject === 'math') {
    question = generateMathQuestion();
  } else {
    const bank = subject === 'science' ? SCIENCE_QUESTIONS : subject === 'english' ? ENGLISH_QUESTIONS : HISTORY_QUESTIONS;
    const available = bank.filter((_, i) => !recentQuestions.includes(subject + '_' + i));
    if (available.length === 0) { recentQuestions = []; return getQuestion(subject); }
    const idx = Math.floor(Math.random() * available.length);
    const origIdx = bank.indexOf(available[idx]);
    question = available[idx];
    recentQuestions.push(subject + '_' + origIdx);
    if (recentQuestions.length > 8) recentQuestions.shift();
  }
  const options = [question.a, ...question.w];
  for (let i = options.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [options[i], options[j]] = [options[j], options[i]];
  }
  return { question: question.q, correct: question.a, options: options };
}

// ═══ QUIZ OVERLAY ═══
let currentQuizData = null;
let quizWaitInterval = null;

function showQuiz() {
  quizActive = true;
  const sm = getSchoolMode();
  if (!sm) return;
  currentQuizData = getQuestion(sm.subject);
  document.getElementById('quiz-subject').textContent = sm.subject.toUpperCase();
  document.getElementById('quiz-question').textContent = currentQuizData.question;
  document.getElementById('quiz-feedback').textContent = '';
  document.getElementById('quiz-feedback').className = 'quiz-feedback';
  document.getElementById('quiz-wait').textContent = '';
  const answersEl = document.getElementById('quiz-answers');
  answersEl.innerHTML = '';
  currentQuizData.options.forEach(function(opt, i) {
    const btn = document.createElement('button');
    btn.className = 'quiz-answer';
    btn.textContent = opt;
    btn.onclick = function() { answerQuiz(i); };
    answersEl.appendChild(btn);
  });
  document.getElementById('quiz-overlay').classList.add('visible');
}

function hideQuiz() {
  quizActive = false;
  if (quizWaitInterval) { clearInterval(quizWaitInterval); quizWaitInterval = null; }
  document.getElementById('quiz-overlay').classList.remove('visible');
}

function answerQuiz(index) {
  if (!currentQuizData) return;
  const buttons = document.querySelectorAll('#quiz-answers .quiz-answer');
  const selected = currentQuizData.options[index];
  const isCorrect = selected === currentQuizData.correct;
  buttons.forEach(function(btn, i) {
    btn.classList.add('disabled');
    if (currentQuizData.options[i] === currentQuizData.correct) btn.classList.add(isCorrect ? 'correct' : 'reveal');
    if (i === index && !isCorrect) btn.classList.add('wrong');
  });
  const fb = document.getElementById('quiz-feedback');
  if (isCorrect) {
    fb.textContent = 'Correct! Keep playing!';
    fb.className = 'quiz-feedback success';
    setTimeout(function() {
      hideQuiz();
      quizTimeLeft = getQuizInterval();
      updateTimerDisplay();
      startQuizTimer();
    }, 1200);
  } else {
    fb.textContent = 'Not quite! The answer is: ' + currentQuizData.correct;
    fb.className = 'quiz-feedback fail';
    let waitTime = 20;
    const waitEl = document.getElementById('quiz-wait');
    waitEl.textContent = 'Try again in ' + waitTime + 's...';
    quizWaitInterval = setInterval(function() {
      waitTime--;
      if (waitTime <= 0) {
        clearInterval(quizWaitInterval);
        quizWaitInterval = null;
        waitEl.textContent = '';
        showQuiz();
      } else {
        waitEl.textContent = 'Try again in ' + waitTime + 's...';
      }
    }, 1000);
  }
}

// Apply school mode on load
applySchoolMode();

// Close overlays on escape
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') {
    if (quizActive) return;
    if (document.getElementById('game-player').classList.contains('visible')) { exitGamePlayer(); return; }
    closeAchievements();
    closeShop();
    closeSchoolMode();
  }
});
</script>

</body>
</html>
